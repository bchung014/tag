!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n={LEFT:65,RIGHT:68,UP:87,DOWN:83,DASH:86},o=37,a=39,s=38,l=40,h=191,c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyPressed=this.keyPressed.bind(this)}var e,i,c;return e=t,(i=[{key:"keyPressed",value:function(t){var e="keydown"==t.type;switch(t.keyCode){case n.LEFT:this.leftP1=e;break;case n.RIGHT:this.rightP1=e;break;case n.UP:this.upP1=e;break;case n.DOWN:this.downP1=e;break;case n.DASH:this.dashP1=e;break;case n.TAG:this.tagP1=e;break;case o:this.leftP2=e;break;case a:this.rightP2=e;break;case s:this.upP2=e;break;case l:this.downP2=e;break;case h:this.dashP2=e;break;case 82:this.restart=e}}}])&&r(e.prototype,i),c&&r(e,c),t}(),u=function(t){var e=new Image;return e.src=t,e};function f(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=[[0,17,16,16],[17,17,16,16],[34,17,16,16],[51,17,16,16],[34,17,16,16],[17,17,16,16]],m=[[85,0,16,16]],d=[[153,102,16,16],[136,102,16,16],[170,102,16,16],[153,119,16,16],[136,119,16,16],[170,119,16,16]],g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.tileMap=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.assetMap=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,2,2,2,4,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,2,2,4,0,0,0,0,6,5,5,5,5,7,0,0,0,0,0,0,0,8,8,8,8,0,0,6,5,5,5,7,0,0,0,0,6,5,5,5,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,6,5,5,5,7,0,0,0,0,6,5,5,5,5,7,0,0,0,0,0,0,3,2,2,2,2,2,2,4,5,5,5,8,8,8,8,2,2,2,4,5,5,7,0,0,0,0,0,0,6,5,5,5,5,5,5,7,5,5,5,7,0,0,0,5,5,5,7,5,5,7,0,3,2,2,2,2,2,2,2,4,5,5,5,7,5,5,5,7,0,0,0,5,5,5,7,5,5,7,0,6,5,5,5,5,5,5,5,7,5,5,5,7,5,5,5,7,0,0,0,2,2,2,2,2,4,7,0,6,5,5,5,5,5,5,5,7,5,5,5,7,5,5,5,3,2,2,2,5,5,5,5,5,7,7,0,6,5,3,2,2,2,2,2,2,2,2,4,7,5,5,5,6,5,5,5,5,5,5,5,5,7,7,0,6,5,6,5,5,5,5,5,5,5,5,7,7,5,5,5,6,5,5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.extrasMap=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.tileSize=50,this.rows=14,this.cols=28,this.frameCount={shine:0,delay:0},this.image=u("./assets/tile_map.png")}var e,i,r;return e=t,(i=[{key:"redraw",value:function(t,e,i,r,n){this.ctx.drawImage(this.image,t,e,i,r,n%this.cols*this.tileSize,Math.floor(n/this.cols)*this.tileSize,this.tileSize,this.tileSize)}},{key:"shine",value:function(t){this.redraw.apply(this,f(p[Math.floor(this.frameCount.shine/6)]).concat([t])),this.frameCount.delay++,20==this.frameCount.delay&&(this.frameCount.shine++,this.frameCount.delay=0),36===this.frameCount.shine&&(this.frameCount.shine=0)}},{key:"draw",value:function(){for(var t=0;t<this.assetMap.length;t++){var e=this.assetMap[t];switch(e){case 1:this.redraw.apply(this,f(m[0]).concat([t]));break;case 2:this.redraw.apply(this,f(d[0]).concat([t]));break;case 3:this.redraw.apply(this,f(d[1]).concat([t]));break;case 4:this.redraw.apply(this,f(d[2]).concat([t]));break;case 5:this.redraw.apply(this,f(d[3]).concat([t]));break;case 6:this.redraw.apply(this,f(d[4]).concat([t]));break;case 7:this.redraw.apply(this,f(d[5]).concat([t]));break;case 8:this.shine(t);break;default:this.ctx.fillStyle=0===e?"pink":"black",this.ctx.fillRect(t%this.cols*this.tileSize,Math.floor(t/this.cols)*this.tileSize,this.tileSize,this.tileSize)}}}}])&&y(e.prototype,i),r&&y(e,r),t}();function w(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=1.2,v=20,C=5,k=20,x=1.5,S=.9,P={1:{left:"leftP1",right:"rightP1",up:"upP1",down:"downP1",dash:"dashP1",tag:"tagP1"},2:{left:"leftP2",right:"rightP2",up:"upP2",down:"downP2",dash:"dashP2"}},T=function(){function t(e,i,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.playerNumber=r,this.isTagger=o,this.x=n[0],this.y=n[1],this.oldX=70,this.oldY=-100,this.xVelocity=0,this.yVelocity=0,this.jumping=0,this.colliding=!1,this.cooldown={doubleJump:!1,dash:!1,tag:!1,hitstun:!1},this.playerControls=P[this.playerNumber],this.ctx=e,this.controller=i}var e,i,r;return e=t,(i=[{key:"move",value:function(){this.cooldown.hitstun&&(this.xVelocity=this.yVelocity=0),this.controller[this.playerControls.up]&&this.jump(),this.controller[this.playerControls.dash]&&this.dash(),this.controller[this.playerControls.down]&&this.fastfall(),this.controller[this.playerControls.left]&&(this.xVelocity-=b),this.controller[this.playerControls.right]&&(this.xVelocity+=b),this.yVelocity+=x,this.xVelocity*=S,this.oldX=this.x,this.oldY=this.y,this.x+=this.xVelocity,this.y+=this.yVelocity,this.x<=-this.width?this.x=this.ctx.canvas.width-1:this.x>this.ctx.canvas.width&&(this.x=-this.width),this.y>this.ctx.canvas.height&&(this.yVelocity=0,this.y=0)}},{key:"jump",value:function(){var t=this;this.cooldown.doubleJump||(0===this.jumping?(this.yVelocity=0,this.yVelocity-=v,this.jumping+=1,this.cooldown.doubleJump=!0,setTimeout((function(){return t.cooldown.doubleJump=!1}),300)):1===this.jumping&&(this.yVelocity=0,this.yVelocity-=v,this.jumping+=1))}},{key:"dash",value:function(){var t=this;this.cooldown.dash||(this.controller[this.playerControls.right]?(this.xVelocity=0,this.xVelocity+=k):this.controller[this.playerControls.left]&&(this.xVelocity=0,this.xVelocity-=k),this.cooldown.dash=!0,setTimeout((function(){return t.cooldown.dash=!1}),1e3))}},{key:"fastfall",value:function(){this.colliding||(this.yVelocity+=C)}},{key:"tagged",value:function(){var t=this;this.isTagger||(this.cooldown.hitstun=!0,setTimeout((function(){return t.cooldown.hitstun=!1}),2e3)),this.isTagger=!this.isTagger,this.cooldown.tag=!0,setTimeout((function(){return t.cooldown.tag=!1}),2e3)}},{key:"redraw",value:function(t,e,i,r){this.xVelocity<0?(this.ctx.scale(-1,1),this.ctx.drawImage(this.image,t,e,i,r,-this.x-this.width,this.y,i,r),this.ctx.scale(-1,1)):this.ctx.drawImage(this.image,t,e,i,r,this.x,this.y,i,r)}},{key:"draw",value:function(){}}])&&w(e.prototype,i),r&&w(e,r),t}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=[[9,16,31,42],[45,16,31,42],[81,16,31,42],[117,16,31,42]],D=[[9,66,30,42],[44,66,30,42],[79,66,33,42],[117,66,30,42],[152,66,29,42],[186,66,29,42]],I=[[9,168,31,42],[45,168,28,42],[78,168,38,42],[121,168,44,42],[78,168,38,42],[45,168,28,42],[9,168,31,42]],G=function(t){function e(){var t,i;O(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(i=E(this,(t=V(e)).call.apply(t,[this].concat(n)))).image=u("./assets/shrek.png"),i.width=32,i.height=42,i.frameCount={idle:0,walk:0,tag:0},i}var i,r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t),i=e,(r=[{key:"idle",value:function(){this.redraw.apply(this,M(z[Math.floor(this.frameCount.idle/8)])),this.frameCount.idle++,32===this.frameCount.idle&&(this.frameCount.idle=0)}},{key:"walk",value:function(){this.redraw.apply(this,M(D[Math.floor(this.frameCount.walk/10)])),this.frameCount.walk++,60===this.frameCount.walk&&(this.frameCount.walk=0)}},{key:"tag",value:function(){this.redraw.apply(this,M(I[Math.floor(this.frameCount.tag/2)])),this.frameCount.tag++,14===this.frameCount.tag&&(this.frameCount.tag=0)}},{key:"draw",value:function(){this.controller[this.playerControls.tag]?this.tag():this.controller[this.playerControls.left]||this.controller[this.playerControls.right]?this.walk():this.idle(),this.move()}}])&&A(i.prototype,r),n&&A(i,n),e}(T);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=[[1,1,64,50],[72,1,64,50],[149,1,64,50],[224,1,64,50],[295,1,64,50],[367,1,64,50],[439,1,64,50],[515,1,64,50]],X=[[2,2,33,44],[38,2,33,44],[74,2,33,44],[110,2,33,44],[2,49,33,44],[38,49,33,44],[74,49,33,44],[110,49,33,44],[2,96,33,44],[38,96,33,44],[74,96,33,44],[110,96,33,44]],q=function(t){function e(){var t,i;R(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(i=F(this,(t=H(e)).call.apply(t,[this].concat(n)))).image=u("./assets/handsprite.png"),i.itSprite=u("./assets/letter.png"),i.width=54,i.height=50,i.frameCount={idle:0,walk:0,tag:0,it:0,delay:0},i}var i,r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,t),i=e,(r=[{key:"idle",value:function(){this.redraw.apply(this,L(W[Math.floor(this.frameCount.idle/6)])),this.frameCount.idle++,48===this.frameCount.idle&&(this.frameCount.idle=0)}},{key:"it",value:function(){this.itDrawer.apply(this,L(X[Math.floor(this.frameCount.it/1)])),this.frameCount.delay++,8==this.frameCount.delay&&(this.frameCount.it++,this.frameCount.delay=0),12===this.frameCount.it&&(this.frameCount.it=0)}},{key:"itDrawer",value:function(t,e,i,r){this.ctx.drawImage(this.itSprite,t,e,i,r,this.x+10,this.y-50,i,r)}},{key:"draw",value:function(){this.it(),this.move(),this.idle()}}])&&Y(i.prototype,r),n&&Y(i,n),e}(T);function B(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var U=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.players=i,this.timer=r,this.tagCooldown=!1}var e,i,r;return e=t,(i=[{key:"tagOccurred",value:function(){var t=this;this.players[0].x<this.players[1].x+this.players[1].width&&this.players[0].x+this.players[0].width>this.players[1].x&&this.players[0].y<this.players[1].y+this.players[1].height&&this.players[0].y+this.players[0].height>this.players[1].y&&(this.tagCooldown||(this.players.forEach((function(t){return t.isTagger=!t.isTagger})),this.changeTagger(),this.timer.decrementTimer(),this.tagCooldown=!0,setTimeout((function(){return t.tagCooldown=!1}),2e3)))}},{key:"changeTagger",value:function(){var t=this;this.players[0].isTagger?(this.players[0]=new q(this.players[0].ctx,this.players[0].controller,this.players[0].playerNumber,[this.players[0].x,this.players[0].y-8],!0),this.players[1]=new G(this.players[1].ctx,this.players[1].controller,this.players[1].playerNumber,[this.players[1].x,this.players[1].y],!1),this.players[0].cooldown.hitstun=!0,setTimeout((function(){return t.players[0].cooldown.hitstun=!1}),2e3)):(this.players[0]=new G(this.players[0].ctx,this.players[0].controller,this.players[0].playerNumber,[this.players[0].x,this.players[0].y],!1),this.players[1]=new q(this.players[1].ctx,this.players[1].controller,this.players[1].playerNumber,[this.players[1].x,this.players[1].y-8],!0),this.players[1].cooldown.hitstun=!0,setTimeout((function(){return t.players[1].cooldown.hitstun=!1}),2e3))}},{key:"getCollisionAngles",value:function(t,e){switch(e){case"left":return t.x;case"right":return t.x+t.width;case"top":return t.y;case"bottom":return t.y+t.height;case"center":return t.y+t.height/2}}},{key:"checkMapCollisions",value:function(){var t=this;this.players.forEach((function(e){var i=Math.floor(t.getCollisionAngles(e,"left")/t.map.tileSize),r=Math.floor(t.getCollisionAngles(e,"right")/t.map.tileSize),n=Math.floor(t.getCollisionAngles(e,"top")/t.map.tileSize),o=Math.floor(t.getCollisionAngles(e,"bottom")/t.map.tileSize),a=Math.floor(t.getCollisionAngles(e,"center")/t.map.tileSize),s=t.map.tileMap[o*t.map.cols+i],l=t.map.tileMap[o*t.map.cols+r];t.map.tileMap[n*t.map.cols+i],t.map.tileMap[n*t.map.cols+r],t.map.tileMap[a*t.map.cols+r],t.map.tileMap[a*t.map.cols+i],e.colliding=!1,(s||l)&&t.bottomCollision(e,o)}))}},{key:"topCollision",value:function(t,e){if(t.yVelocity<0){var i=(e+1)*this.map.tileSize;t.y<i&&t.oldY>=i&&(t.jumping=0,t.yVelocity=0,t.y=t.oldY=i-.01,t.colliding=!0)}}},{key:"bottomCollision",value:function(t,e){if(t.yVelocity>0){var i=e*this.map.tileSize;t.y+t.height>i&&t.oldY+t.height<=i&&(t.jumping=0,t.yVelocity=0,t.y=t.oldY=i-t.height-.01,t.colliding=!0)}}},{key:"rightCollision",value:function(t,e){if(t.xVelocity>0){var i=e*this.map.tileSize;t.x+t.width>i&&(t.xVelocity=0,t.x=t.oldX=i-t.width)}}},{key:"leftCollision",value:function(t,e){if(t.xVelocity<0){var i=(e+1)*this.map.tileSize;t.x<i&&(t.xVelocity=-.1,t.x=t.oldX=i)}}}])&&B(e.prototype,i),r&&B(e,r),t}();function K(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=5,this.gameover=!1,this.ctx=e,this.numTags=0,this.currTimer=0}var e,i,r;return e=t,(i=[{key:"runTimer",value:function(){var t=this;this.currTimer=setInterval((function(){t.time>0?t.time-=1:t.gameover=!0}),1e3)}},{key:"resetTimer",value:function(){clearInterval(this.currTimer)}},{key:"decrementTimer",value:function(){this.resetTimer(),this.numTags++,this.time=5-3*this.numTags,this.runTimer()}},{key:"draw",value:function(){this.ctx.font="50px Arial",this.ctx.fillStyle="green",this.ctx.fillText(this.time,680,50)}}])&&K(e.prototype,i),r&&K(e,r),t}();function Z(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=[70,500],tt=[1260,500],et=1,it=2,rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=document.getElementById("gameWindow").getContext("2d"),this.map=new g(this.ctx),this.controller=new c,this.timer=new Q(this.ctx),this.P1=new q(this.ctx,this.controller,et,$,!0),this.P2=new G(this.ctx,this.controller,it,tt,!1),this.players=[this.P1,this.P2],this.collision=new U(this.map,this.players,this.timer)}var e,i,r;return e=t,(i=[{key:"initialize",value:function(){window.addEventListener("keydown",this.controller.keyPressed),window.addEventListener("keyup",this.controller.keyPressed),this.timer.runTimer(),this.render()}},{key:"isGameover",value:function(){return this.timer.gameover}},{key:"gameoverScreen",value:function(t){this.timer.gameover&&(this.ctx.clearRect(0,0,1400,700),this.ctx.font="50px Arial",this.ctx.fillStyle="red",this.ctx.fillText("gameover congrats Player ".concat(t.playerNumber," everyone is bad but u"),100,200),this.render())}},{key:"render",value:function(){var t=this;window.requestAnimationFrame((function(){t.controller.restart||(t.isGameover()?t.players.forEach((function(e){e.isTagger||t.gameoverScreen(e)})):(t.map.draw(),t.timer.draw(),t.players.forEach((function(t){return t.draw()})),t.collision.checkMapCollisions(),t.collision.tagOccurred(),t.render()))}))}}])&&Z(e.prototype,i),r&&Z(e,r),t}();function nt(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ot(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var at=[[2,2,33,44],[38,2,33,44],[74,2,33,44],[110,2,33,44],[2,49,33,44],[38,49,33,44],[74,49,33,44],[110,49,33,44],[2,96,33,44],[38,96,33,44],[74,96,33,44],[110,96,33,44]],st=[[2,2,72,67],[77,2,72,67],[152,2,72,67],[227,2,72,67],[302,2,72,67],[377,2,72,67],[152,2,72,67]],lt=[[2,2,143,18],[2,23,143,18],[2,44,143,18],[2,65,143,18],[2,86,143,18],[2,107,143,18]],ht=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currGame=new rt,this.ctx=document.getElementById("gameWindow").getContext("2d"),this.itSprite=u("./assets/letter.png"),this.grabSprite=u("./assets/grab.png"),this.startMessageSprite=u("./assets/start_message.png"),this.gameCommenced=!1,this.frameCount={it:0,grab:0,startMessage:0,itDelay:0,grabDelay:0,startMessageDelay:0},window.addEventListener("keydown",(function(t){switch(t.key){case"r":e.currGame.timer.resetTimer(),e.currGame=new rt,e.gameCommenced=!0,e.currGame.initialize();break;default:return}}))}var e,i,r;return e=t,(i=[{key:"start",value:function(){var t=this;window.requestAnimationFrame((function(){t.gameCommenced?console.log("here"):(t.ctx.fillStyle="pink",t.ctx.fillRect(0,0,t.ctx.canvas.width,t.ctx.canvas.height),t.it(),t.grab(),t.startMessage(),t.start())}))}},{key:"it",value:function(){this.drawer.apply(this,nt(at[Math.floor(this.frameCount.it/1)]).concat([635,60,4,this.itSprite])),this.frameCount.itDelay++,8==this.frameCount.itDelay&&(this.frameCount.it++,this.frameCount.itDelay=0),12===this.frameCount.it&&(this.frameCount.it=0)}},{key:"grab",value:function(){this.drawer.apply(this,nt(st[Math.floor(this.frameCount.grab/1)]).concat([560,200,4,this.grabSprite])),this.frameCount.grabDelay++,10==this.frameCount.grabDelay&&(this.frameCount.grab++,this.frameCount.grabDelay=0),7===this.frameCount.grab&&(this.frameCount.grab=0)}},{key:"startMessage",value:function(){this.drawer.apply(this,nt(lt[Math.floor(this.frameCount.startMessage/1)]).concat([340,510,5,this.startMessageSprite])),this.frameCount.startMessageDelay++,8==this.frameCount.startMessageDelay&&(this.frameCount.startMessage++,this.frameCount.startMessageDelay=0),6===this.frameCount.startMessage&&(this.frameCount.startMessage=0)}},{key:"drawer",value:function(t,e,i,r,n,o,a,s){this.ctx.drawImage(s,t,e,i,r,n,o,i*a,r*a)}}])&&ot(e.prototype,i),r&&ot(e,r),t}();window.addEventListener("DOMContentLoaded",(function(){(new ht).start()}))}]);
//# sourceMappingURL=main.js.map