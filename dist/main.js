!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=37,o=39,s=38,a=40,l=191,h=190,c=65,u=68,f=87,y=83,p=86,d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyPressed=this.keyPressed.bind(this)}var e,i,d;return e=t,(i=[{key:"keyPressed",value:function(t){var e="keydown"==t.type;switch(t.keyCode){case n:this.leftP1=e;break;case o:this.rightP1=e;break;case s:this.upP1=e;break;case a:this.downP1=e;break;case l:this.dashP1=e;break;case h:this.tagP1=e;break;case c:this.leftP2=e;break;case u:this.rightP2=e;break;case f:this.upP2=e;break;case y:this.downP2=e;break;case p:this.dashP2=e;break;case 82:this.restart=e}}}])&&r(e.prototype,i),d&&r(e,d),t}();function m(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=[[0,17,16,16],[17,17,16,16],[34,17,16,16],[51,17,16,16],[34,17,16,16],[17,17,16,16]],b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.tileMap=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.assetMap=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.tileSize=50,this.rows=14,this.cols=28,this.frameCount={shine:0},this.image=this.getImage("./assets/tile_map.png")}var e,i,r;return e=t,(i=[{key:"getImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"redraw",value:function(t,e,i,r,n){this.ctx.drawImage(this.image,t,e,i,r,n%this.cols*this.tileSize,Math.floor(n/this.cols)*this.tileSize,this.tileSize,this.tileSize)}},{key:"shine",value:function(t){this.redraw.apply(this,m(w[Math.floor(this.frameCount.shine/8)]).concat([t])),this.frameCount.shine++,48===this.frameCount.shine&&(this.frameCount.shine=0)}},{key:"draw",value:function(){for(var t=0;t<this.assetMap.length;t++)0===this.assetMap[t]?(this.ctx.fillStyle=0===this.assetMap[t]?"pink":"black",this.ctx.fillRect(t%this.cols*this.tileSize,Math.floor(t/this.cols)*this.tileSize,this.tileSize,this.tileSize)):this.redraw.apply(this,m(w[0]).concat([t]))}}])&&g(e.prototype,i),r&&g(e,r),t}();function v(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=1.2,k=20,C=5,P=20,j=1.5,O=.9,S={1:{left:"leftP1",right:"rightP1",up:"upP1",down:"downP1",dash:"dashP1",tag:"tagP1"},2:{left:"leftP2",right:"rightP2",up:"upP2",down:"downP2",dash:"dashP2"}},T=function(){function t(e,i,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.playerNumber=r,this.isTagger=o,this.x=n[0],this.y=n[1],this.oldX=70,this.oldY=-100,this.xVelocity=0,this.yVelocity=0,this.jumping=0,this.colliding=!1,this.cooldown={doubleJump:!1,dash:!1,tag:!1,hitstun:!1},this.playerControls=S[this.playerNumber],this.ctx=e,this.controller=i}var e,i,r;return e=t,(i=[{key:"getImage",value:function(t){var e=new Image;return e.src=t,e}},{key:"move",value:function(){this.cooldown.hitstun&&(this.xVelocity=this.yVelocity=0),this.controller[this.playerControls.up]&&this.jump(),this.controller[this.playerControls.dash]&&this.dash(),this.controller[this.playerControls.down]&&this.fastfall(),this.controller[this.playerControls.left]&&(this.xVelocity-=x),this.controller[this.playerControls.right]&&(this.xVelocity+=x),this.yVelocity+=j,this.xVelocity*=O,this.oldX=this.x,this.oldY=this.y,this.x+=this.xVelocity,this.y+=this.yVelocity,this.x<=-this.width?this.x=this.ctx.canvas.width-1:this.x>this.ctx.canvas.width&&(this.x=-this.width)}},{key:"jump",value:function(){var t=this;this.cooldown.doubleJump||(0===this.jumping?(this.yVelocity=0,this.yVelocity-=k,this.jumping+=1,this.cooldown.doubleJump=!0,setTimeout((function(){return t.cooldown.doubleJump=!1}),300)):1===this.jumping&&(this.yVelocity=0,this.yVelocity-=k,this.jumping+=1))}},{key:"dash",value:function(){var t=this;this.cooldown.dash||(this.controller[this.playerControls.right]?(this.xVelocity=0,this.xVelocity+=P):this.controller[this.playerControls.left]&&(this.xVelocity=0,this.xVelocity-=P),this.cooldown.dash=!0,setTimeout((function(){return t.cooldown.dash=!1}),1e3))}},{key:"fastfall",value:function(){this.colliding||(this.yVelocity+=C)}},{key:"tagged",value:function(){var t=this;this.isTagger||(this.cooldown.hitstun=!0,setTimeout((function(){return t.cooldown.hitstun=!1}),2e3)),this.isTagger=!this.isTagger,this.cooldown.tag=!0,setTimeout((function(){return t.cooldown.tag=!1}),2e3)}},{key:"redraw",value:function(t,e,i,r){this.xVelocity<0?(this.ctx.scale(-1,1),this.ctx.drawImage(this.image,t,e,i,r,-this.x-this.width,this.y,i,r),this.ctx.scale(-1,1)):this.ctx.drawImage(this.image,t,e,i,r,this.x,this.y,i,r)}},{key:"draw",value:function(){}}])&&v(e.prototype,i),r&&v(e,r),t}();function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=[[9,16,31,42],[45,16,31,42],[81,16,31,42],[117,16,31,42]],G=[[9,66,30,42],[44,66,30,42],[79,66,33,42],[117,66,30,42],[152,66,29,42],[186,66,29,42]],J=[[9,168,31,42],[45,168,28,42],[78,168,38,42],[121,168,44,42],[78,168,38,42],[45,168,28,42],[9,168,31,42]],L=function(t){function e(){var t,i;E(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(i=V(this,(t=I(e)).call.apply(t,[this].concat(n)))).image=i.getImage("./assets/shrek.png"),i.width=32,i.height=42,i.frameCount={idle:0,walk:0,tag:0},i}var i,r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,t),i=e,(r=[{key:"idle",value:function(){this.redraw.apply(this,M(N[Math.floor(this.frameCount.idle/8)])),this.frameCount.idle++,32===this.frameCount.idle&&(this.frameCount.idle=0)}},{key:"walk",value:function(){this.redraw.apply(this,M(G[Math.floor(this.frameCount.walk/10)])),this.frameCount.walk++,60===this.frameCount.walk&&(this.frameCount.walk=0)}},{key:"tag",value:function(){this.redraw.apply(this,M(J[Math.floor(this.frameCount.tag/2)])),this.frameCount.tag++,14===this.frameCount.tag&&(this.frameCount.tag=0)}},{key:"draw",value:function(){this.controller[this.playerControls.tag]?this.tag():this.controller[this.playerControls.left]||this.controller[this.playerControls.right]?this.walk():this.idle(),this.move()}}])&&_(i.prototype,r),n&&_(i,n),e}(T);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var F=[[1,1,64,50],[72,1,64,50],[149,1,64,50],[224,1,64,50],[295,1,64,50],[367,1,64,50],[439,1,64,50],[515,1,64,50]],H=function(t){function e(){var t,i;W(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(i=q(this,(t=B(e)).call.apply(t,[this].concat(n)))).image=i.getImage("./assets/handsprite.png"),i.width=54,i.height=50,i.frameCount={idle:0,walk:0,tag:0},i}var i,r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,t),i=e,(r=[{key:"idle",value:function(){this.redraw.apply(this,Y(F[Math.floor(this.frameCount.idle/6)])),this.frameCount.idle++,48===this.frameCount.idle&&(this.frameCount.idle=0)}},{key:"draw",value:function(){this.ctx.font="40px Arial",this.ctx.fillStyle="red",this.ctx.fillText("IT",this.x+20,this.y),this.move(),this.idle()}}])&&X(i.prototype,r),n&&X(i,n),e}(T);function K(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Q=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.players=i,this.timer=r,this.tagCooldown=!1}var e,i,r;return e=t,(i=[{key:"tagOccurred",value:function(){var t=this;this.players[0].x<this.players[1].x+this.players[1].width&&this.players[0].x+this.players[0].width>this.players[1].x&&this.players[0].y<this.players[1].y+this.players[1].height&&this.players[0].y+this.players[0].height>this.players[1].y&&(this.tagCooldown||(this.players.forEach((function(t){return t.isTagger=!t.isTagger})),this.changeTagger(),this.timer.time=10,this.tagCooldown=!0,setTimeout((function(){return t.tagCooldown=!1}),2e3)))}},{key:"changeTagger",value:function(){var t=this;this.players[0].isTagger?(this.players[0]=new H(this.players[0].ctx,this.players[0].controller,this.players[0].playerNumber,[this.players[0].x,this.players[0].y-8],!0),this.players[1]=new L(this.players[1].ctx,this.players[1].controller,this.players[1].playerNumber,[this.players[1].x,this.players[1].y],!1),this.players[0].cooldown.hitstun=!0,setTimeout((function(){return t.players[0].cooldown.hitstun=!1}),2e3)):(this.players[0]=new L(this.players[0].ctx,this.players[0].controller,this.players[0].playerNumber,[this.players[0].x,this.players[0].y],!1),this.players[1]=new H(this.players[1].ctx,this.players[1].controller,this.players[1].playerNumber,[this.players[1].x,this.players[1].y-8],!0),this.players[1].cooldown.hitstun=!0,setTimeout((function(){return t.players[1].cooldown.hitstun=!1}),2e3))}},{key:"getCollisionAngles",value:function(t,e){switch(e){case"left":return t.x;case"right":return t.x+t.width;case"top":return t.y;case"bottom":return t.y+t.height}}},{key:"checkMapCollisions",value:function(){var t=this;this.players.forEach((function(e){var i=Math.floor(t.getCollisionAngles(e,"left")/t.map.tileSize),r=Math.floor(t.getCollisionAngles(e,"right")/t.map.tileSize),n=(Math.floor(t.getCollisionAngles(e,"top")/t.map.tileSize),Math.floor(t.getCollisionAngles(e,"bottom")/t.map.tileSize)),o=t.map.tileMap[n*t.map.cols+i],s=t.map.tileMap[n*t.map.cols+r];if(o||s){if(e.yVelocity>0){var a=n*t.map.tileSize;e.y+e.height>a&&e.oldY+e.height<=a&&(e.jumping=0,e.yVelocity=0,e.y=e.oldY=a-e.height-.01,e.colliding=!0)}}else e.colliding=!1}))}}])&&K(e.prototype,i),r&&K(e,r),t}();function U(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=10,this.gameover=!1,this.ctx=e}var e,i,r;return e=t,(i=[{key:"runTimer",value:function(){var t=this;setInterval((function(){t.time>0?t.time-=1:(t.time="GG",t.gameover=!0)}),1e3)}},{key:"resetTimer",value:function(){clearInterval(),this.time=10}},{key:"draw",value:function(){this.ctx.font="50px Arial",this.ctx.fillStyle="red",this.ctx.fillText(this.time,700,50)}}])&&U(e.prototype,i),r&&U(e,r),t}();function $(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tt=[70,500],et=[1260,500],it=1,rt=2,nt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=document.getElementById("gameWindow").getContext("2d"),this.map=new b(this.ctx),this.controller=new d,this.timer=new Z(this.ctx),this.P1=new H(this.ctx,this.controller,it,tt,!0),this.P2=new L(this.ctx,this.controller,rt,et,!1),this.players=[this.P1,this.P2],this.collision=new Q(this.map,this.players,this.timer)}var e,i,r;return e=t,(i=[{key:"initialize",value:function(){window.addEventListener("keydown",this.controller.keyPressed),window.addEventListener("keyup",this.controller.keyPressed),this.timer.runTimer(),this.render()}},{key:"getWinner",value:function(){var t;return this.players.forEach((function(e){e.isTagger||(t=e)})),t}},{key:"isGameover",value:function(){var t=this.getWinner();this.timer.gameover&&(this.ctx.clearRect(0,0,1400,700),this.ctx.font="50px Arial",this.ctx.fillStyle="red",this.ctx.fillText("gameover congrats Player ".concat(t.playerNumber," everyone is bad but u"),100,200),this.render())}},{key:"render",value:function(){var t=this;this.isGameover(),this.map.draw(),this.timer.draw(),this.players.forEach((function(t){return t.draw()})),this.collision.checkMapCollisions(),this.collision.tagOccurred(),window.requestAnimationFrame((function(){t.render()}))}}])&&$(e.prototype,i),r&&$(e,r),t}();window.addEventListener("DOMContentLoaded",(function(){(new nt).initialize()}))}]);
//# sourceMappingURL=main.js.map